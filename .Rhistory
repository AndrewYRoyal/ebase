setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
dat <- bList$predictions
adjustedN <- function(x, n){
corr <- acf(x, lag.max = 1, plot = FALSE)$acf[2]
return(((1 - corr)/(1 + corr)))
}
varCalc <- function(meter, dat){
y <- dat[period == 'performance' & meterID == meter, (elct)]
yHat <- dat[period == 'performance' & meterID == meter, (pElct)]
sum((y - mean(y))^2)/adjustedN(y, length(y)) +
sum((yHat - mean(yHat))^2)/adjustedN(yHat, length(yHat))
}
meterV
sapply(unique(meterDT[, meterID]),
function(meter) varCalc(meter = meter, dat = bList$predictions))
summary(bList)
varCalc <- function(y, yHat){
sum((y - mean(y))^2)/adjustedN(y, length(y)) +
sum((yHat - mean(yHat))^2)/adjustedN(yHat, length(yHat))
}
bList$predictions[, varSavings:= varCalc(y = elct, yHat = pElct), by = .(meterID)]
bList$predictions
bList$predictions[period == 'performance',
varSavings:= varCalc(y = elct, yHat = pElct), by = .(meterID)]
bList$predictions
bList$predictions[period == 'performance', ]
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = FALSE,
padding = 30)
Sys.time() - startTime
summary(bList)
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
summary(bList)
summary(bList, GBoost = TRUE)
sumDT <- summary(bList, GBoost = TRUE)
sumDT[, c('Savings_UB', 'Savings_LB'):=
list(Savings + 2.576*sqrt(varSavings),
Savings - 2.576*sqrt(varSavings))
sumDT
sumDT[, c('Savings_UB', 'Savings_LB'):=
list(Savings + 2.576*sqrt(varSavings),
Savings - 2.576*sqrt(varSavings))
sumDT
sumDT[, c('Savings_UB', 'Savings_LB'):=
list(Savings + 2.576*sqrt(varSavings),
Savings - 2.576*sqrt(varSavings))]
sumDT
sumDT[, c('Savings_UB', 'Savings_LB'):=
list(Savings + 2.576*sqrt(varSavings),
Savings - 2.576*sqrt(varSavings))]
sumDT
sumDT <- summary(bList, GBoost = TRUE)$summaryMeter
sumDT[, c('Savings_UB', 'Savings_LB'):=
list(Savings + 2.576*sqrt(varSavings),
Savings - 2.576*sqrt(varSavings))]
sumDT
Z <- 1.96
sumDT[, c('Savings_UB', 'Savings_LB'):=
list(Savings + Z*sqrt(varSavings),
Savings - Z*sqrt(varSavings))]
sumDT
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
sumDT <- summary(bList, GBoost = TRUE)$summaryMeter
sumDT
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
bList
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
sumDT <- summary(bList, GBoost = TRUE)$summaryMeter
bList
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
sumDT <- summary(bList, GBoost = TRUE)$summaryMeter
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
sumDT
bList
unique(bList[, n])
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
bList
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
bList
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
sumDT <- summary(bList, GBoost = TRUE)$summaryMeter
setwd('C:/Users/Andrew/Dropbox/Res-Intel Model/R_Packages/ebase/ebase')
lapply(c('data.table', 'lfe', 'ggplot2', 'xgboost', 'ggthemes'), library, character.only = TRUE)
rm(list = ls())
source('R/mainFunctions.R')
source('R/helperFunctions.R')
#library('ebase')
sampDT <- fread('vignettes/vignetteData.csv')
sampDT[meter == 'J', eventStart:= '2/1/2017']
sampDT[meter == 'J', eventEnd:= '7/1/2017']
useDT <- unique(sampDT[, .(meterID = meter, date, hr = hour, elct = electricity, temp = temperature)])
meterDT <- unique(sampDT[, .(meterID = meter,
inDate = install_date,
propertyName = 'Playboy Mansion')])
#meterDT[meterID == 'J', c('oStart', 'oEnd'):= list(1, 5)]
propDT <- unique(sampDT[, .(meterID = meter, propertyName = 'Playboy Mansion')])
# Get model
startTime <- Sys.time()
bList <- baselineModel(useDT = useDT,
meterDT = meterDT,
base.length = 12,
date.format = '%m/%d/%Y',
gboost = TRUE,
padding = 30)
Sys.time() - startTime
sumDT <- summary(bList, GBoost = TRUE)$summaryMeter
sumDT
